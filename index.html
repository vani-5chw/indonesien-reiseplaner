<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>üå¥ Indonesien Reiseplaner - August/September 2026</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            padding: 20px;
            min-height: 100vh;
            overflow-x: hidden;
            width: 100%;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .header {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            text-align: center;
            border: 1px solid #e8ecf1;
        }

        .header h1 {
            color: #1a202c;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header .subtitle {
            color: #64748b;
            font-size: 1.1em;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            border: 1px solid #e8ecf1;
            max-width: 100%;
            overflow-x: auto;
        }

        .card-title {
            font-size: 1.5em;
            color: #1a202c;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .icon {
            font-size: 1.3em;
        }

        /* Budget Overview */
        .budget-overview {
            background: #1a202c;
            color: white;
            position: sticky;
            top: 20px;
            border: none;
        }

        .budget-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .budget-total {
            font-size: 2em;
            font-weight: 600;
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.12);
            border-radius: 12px;
            margin-top: 20px;
        }

        /* Flight Cards */
        .flight-card {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid #e2e8f0;
        }

        .flight-route {
            font-size: 1.6em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1a202c;
        }

        .flight-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .flight-info {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            font-size: 0.95em;
        }

        /* Hotel Cards */
        .hotel-card {
            border: 1px solid #e2e8f0;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            position: relative;
            background: white;
        }

        .hotel-featured {
            background: #f8fafc;
            border: 2px solid #3b82f6;
        }

        .hotel-name {
            font-size: 1.3em;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 10px;
        }

        .hotel-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .featured-badge {
            position: absolute;
            top: -10px;
            right: 20px;
            background: #3b82f6;
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        /* Input Controls */
        input, select, textarea {
            width: 100%;
            max-width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            margin-top: 5px;
            transition: border-color 0.2s;
            box-sizing: border-box;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }

        button {
            background: #1a202c;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 10px;
            font-weight: 500;
        }

        button:hover {
            background: #2d3748;
            transform: translateY(-1px);
        }

        .add-button {
            width: 100%;
            background: #3b82f6;
            margin-top: 15px;
        }

        .add-button:hover {
            background: #2563eb;
        }

        /* Route Timeline */
        .timeline {
            position: relative;
            padding-left: 40px;
        }

        .timeline-item {
            position: relative;
            padding: 20px;
            background: white;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 3px solid #cbd5e1;
            border: 1px solid #e2e8f0;
        }

        .timeline-item::before {
            content: 'üìç';
            position: absolute;
            left: -35px;
            top: 20px;
            font-size: 1.5em;
        }

        .day-number {
            background: #64748b;
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            display: inline-block;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-weight: 500;
        }

        /* Alerts */
        .alert {
            background: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            color: #475569;
        }

        .alert-warning {
            background: #fef3c7;
            border-color: #fbbf24;
            color: #92400e;
        }

        .alert-info {
            background: #dbeafe;
            border-color: #3b82f6;
            color: #1e40af;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: #64748b;
            border-bottom: 2px solid transparent;
            margin: 0;
            border-radius: 0;
            font-weight: 500;
        }

        .tab:hover {
            transform: none;
            box-shadow: none;
            color: #1a202c;
        }

        .tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 0;
            }

            .main-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .header h1 {
                font-size: 1.5em;
            }

            .header .subtitle {
                font-size: 1em;
            }

            .header button {
                width: 100%;
                padding: 15px 20px !important;
            }

            .card {
                padding: 15px;
                margin-bottom: 15px;
            }

            .card-title {
                font-size: 1.2em;
            }

            .flight-details,
            .hotel-details {
                grid-template-columns: 1fr;
            }

            .tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .tabs::-webkit-scrollbar {
                display: none;
            }

            .tab {
                font-size: 0.9em;
                padding: 12px 15px;
                white-space: nowrap;
            }

            .timeline {
                padding-left: 25px;
            }

            .timeline-item::before {
                left: -25px;
                font-size: 1.2em;
            }

            .day-number {
                font-size: 0.85em;
                padding: 4px 12px;
            }

            .budget-overview {
                position: static;
                margin-top: 20px;
            }

            .budget-item {
                padding: 12px;
                font-size: 0.95em;
            }

            .budget-total {
                font-size: 1.5em;
                padding: 15px;
            }

            input, select, textarea {
                font-size: 16px !important; /* Prevents zoom on iOS */
                padding: 12px;
            }

            button {
                padding: 12px 20px;
                font-size: 1em;
                min-height: 44px; /* iOS recommended touch target */
            }

            .activity-header {
                flex-direction: column;
                align-items: stretch;
            }

            .activity-header input[type="text"] {
                margin-bottom: 10px;
            }

            .category-actions {
                flex-direction: column;
            }

            .add-item-btn,
            .delete-category-btn {
                width: 100%;
            }

            .alert {
                font-size: 0.9em;
                padding: 12px;
            }

            .flight-card,
            .hotel-card {
                padding: 15px;
            }

            .flight-route {
                font-size: 1.4em;
            }

            /* Make links and buttons more touch-friendly */
            .link-button {
                min-height: 44px;
                padding: 12px 20px;
            }

            /* Better spacing for mobile */
            .timeline-item {
                padding: 12px;
                margin-bottom: 12px;
            }

            /* Stack hotel details vertically on mobile */
            .hotel-details > div {
                margin-bottom: 10px;
            }

            /* Mobile-friendly category folders */
            .category-header {
                padding: 12px 15px;
                font-size: 1em;
            }

            .category-content {
                padding: 15px;
            }

            /* Larger touch targets for activity items */
            .activity-item {
                padding: 12px;
            }

            .delete-btn {
                width: 100%;
                margin-top: 10px;
            }
        }

        /* Extra small phones */
        @media (max-width: 400px) {
            .header h1 {
                font-size: 1.3em;
            }

            .card-title {
                font-size: 1.1em;
            }

            .budget-total {
                font-size: 1.3em;
            }

            .tab {
                font-size: 0.85em;
                padding: 10px 12px;
            }
        }

        /* Landscape mode on phones */
        @media (max-width: 900px) and (orientation: landscape) {
            .budget-overview {
                position: static;
            }
        }

        /* Tablet optimization */
        @media (min-width: 769px) and (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .budget-overview {
                position: static;
                margin-top: 20px;
            }
        }

        /* Price Badge */
        .price-badge {
            background: #10b981;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            display: inline-block;
        }

        .price-per-person {
            font-size: 0.9em;
            color: #64748b;
            margin-top: 5px;
        }

        /* Editable Section */
        .editable-section {
            background: #f8fafc;
            padding: 15px;
            border-radius: 12px;
            margin-top: 10px;
            border: 1px solid #e2e8f0;
        }

        .delete-btn {
            background: #ef4444;
            padding: 8px 15px;
            font-size: 0.9em;
        }

        .delete-btn:hover {
            background: #dc2626;
        }

        /* Category Folders */
        .category-folder {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .category-folder:hover {
            border-color: #cbd5e1;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .category-header {
            background: #f8fafc;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 1.1em;
            transition: background 0.3s;
            color: #1a202c;
        }

        .category-header:hover {
            background: #f1f5f9;
        }

        .category-icon {
            font-size: 1.3em;
        }

        .category-name {
            flex: 1;
        }

        .category-toggle {
            transition: transform 0.3s;
            color: #64748b;
        }

        .category-folder.collapsed .category-toggle {
            transform: rotate(-90deg);
        }

        .category-content {
            padding: 20px;
            background: #fafbfc;
        }

        .category-content.hidden {
            display: none;
        }

        /* Activity Item */
        .activity-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.2s;
        }

        .activity-item:hover {
            border-color: #cbd5e1;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .activity-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #1a202c;
        }

        .activity-price-tag {
            background: #10b981;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .activity-details {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .link-button {
            display: inline-block;
            padding: 10px 18px;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 0.9em;
            transition: background 0.2s;
            font-weight: 500;
        }

        .link-button:hover {
            background: #2563eb;
        }

        .category-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
        }

        .add-item-btn {
            flex: 1;
            background: #3b82f6;
        }

        .add-item-btn:hover {
            background: #2563eb;
        }

        .delete-category-btn {
            background: #ef4444;
            padding: 10px 20px;
        }

        .delete-category-btn:hover {
            background: #dc2626;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üå¥ Indonesien Reiseplaner</h1>
            <p class="subtitle">20. August - 4. September 2026 ‚Ä¢ 16 Tage ‚Ä¢ 2 Personen</p>
            
            <div id="save-status" style="padding: 12px; margin-top: 15px; background: #e8f5e9; border-radius: 10px; color: #2e7d32; font-weight: bold; display: none; text-align: center;">
                ‚úÖ Automatisch gespeichert!
            </div>
            
            <p style="margin-top: 15px; font-size: 0.9em; color: #666; padding: 0 10px; text-align: center;">
                üí° Alles wird automatisch alle 10 Sekunden gespeichert!<br>
                Keine Sorge - nichts geht verloren! üéâ
            </p>
        </div>

        <!-- Main Content Grid -->
        <div class="main-grid">
            <!-- Left Column -->
            <div>
                <!-- Tabs -->
                <div class="card">
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('overview')">üìä √úbersicht</button>
                        <button class="tab" onclick="switchTab('flights')">‚úàÔ∏è Fl√ºge</button>
                        <button class="tab" onclick="switchTab('route')">üó∫Ô∏è Route & Hotels</button>
                        <button class="tab" onclick="switchTab('activities')">üéØ Aktivit√§ten</button>
                    </div>

                    <!-- Overview Tab -->
                    <div id="overview" class="tab-content active">
                        <h2 class="card-title"><span class="icon">üìä</span> Reise√ºbersicht</h2>
                        
                        <div class="alert alert-info">
                            <strong>‚è∞ Wichtig!</strong> Du fliegst von <strong>Salzburg (SZG)</strong> nach <strong>Bali (DPS)</strong> und zur√ºck von <strong>Jakarta (JKT)</strong> nach <strong>Salzburg (SZG)</strong>. Das bedeutet: Route von Bali Richtung Jakarta planen!
                        </div>

                        <div class="alert">
                            <strong>üí° Insider-Tipp:</strong> August/September ist eine gute Reisezeit! Trockenzeit mit angenehmen Temperaturen (ca. 26-30¬∞C). Perfekt f√ºr Tempel & Natur!
                        </div>

                        <div style="margin-top: 20px;">
                            <h3>‚úÖ Bereits geplant:</h3>
                            <ul style="list-style: none; padding: 20px 0;">
                                <li style="padding: 10px; background: #e8f5e9; border-radius: 8px; margin-bottom: 10px;">
                                    ‚úàÔ∏è <strong>Hinflug:</strong> Salzburg ‚Üí Bali (20. Aug 2026)
                                </li>
                                <li style="padding: 10px; background: #e8f5e9; border-radius: 8px; margin-bottom: 10px;">
                                    ‚úàÔ∏è <strong>R√ºckflug:</strong> Jakarta ‚Üí Salzburg (4. Sep 2026)
                                </li>
                                <li style="padding: 10px; background: #fff3e0; border-radius: 8px; margin-bottom: 10px;">
                                    üó∫Ô∏è <strong>Route:</strong> 15 N√§chte ‚Ä¢ 8 Stops (Bali ‚Üí Java ‚Üí Jakarta)
                                </li>
                            </ul>
                        </div>

                        <div style="margin-top: 20px;">
                            <h3>üìù Noch zu tun:</h3>
                            <ul style="list-style: none; padding: 20px 0;">
                                <li style="padding: 10px; background: #ffebee; border-radius: 8px; margin-bottom: 10px;">
                                    üîó Links zu Fl√ºgen einf√ºgen (CheckFelix)
                                </li>
                                <li style="padding: 10px; background: #ffebee; border-radius: 8px; margin-bottom: 10px;">
                                    üè® Hotels f√ºr jeden Stop raussuchen & Links einf√ºgen
                                </li>
                                <li style="padding: 10px; background: #ffebee; border-radius: 8px; margin-bottom: 10px;">
                                    üéØ Aktivit√§ten & Restaurants planen
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Flights Tab -->
                    <div id="flights" class="tab-content">
                        <h2 class="card-title"><span class="icon">‚úàÔ∏è</span> Fl√ºge</h2>
                        
                        <div class="alert">
                            <strong>‚ÑπÔ∏è Hinweis:</strong> Preise bitte von CheckFelix √ºbertragen. Ich kann die exakten Preise nicht automatisch auslesen.
                        </div>

                        <div class="flight-card">
                            <div class="flight-route">SZG ‚Üí DPS</div>
                            <p><strong>20. August 2026 (Hinflug)</strong></p>
                            <div class="flight-details">
                                <div class="flight-info">
                                    <strong>üîó Buchungs-Link:</strong><br>
                                    <input type="url" id="outbound-link" placeholder="CheckFelix Link...">
                                </div>
                                <div class="flight-info">
                                    <strong>Von:</strong><br>Salzburg (SZG)
                                </div>
                                <div class="flight-info">
                                    <strong>Nach:</strong><br>Bali Denpasar (DPS)
                                </div>
                                <div class="flight-info">
                                    <strong>Personen:</strong><br>2 Erwachsene
                                </div>
                                <div class="flight-info">
                                    <strong>Airline:</strong><br>
                                    <input type="text" id="outbound-airline" placeholder="z.B. Emirates" onchange="updateBudget()">
                                </div>
                            </div>
                            <div class="editable-section">
                                <label><strong>üí∞ Preis pro Person:</strong></label>
                                <input type="number" id="outbound-price" placeholder="Preis" onchange="updateBudget()" value="0">
                                <p class="price-per-person">F√ºr 2 Personen: <span id="outbound-total">‚Ç¨0</span></p>
                                <button class="link-button" onclick="openFlightLink('outbound')" id="outbound-link-btn" style="display: none; margin-top: 10px;">üîó Link √∂ffnen</button>
                            </div>
                        </div>

                        <div class="flight-card">
                            <div class="flight-route">JKT ‚Üí SZG</div>
                            <p><strong>4. September 2026 (R√ºckflug)</strong></p>
                            <div class="flight-details">
                                <div class="flight-info">
                                    <strong>üîó Buchungs-Link:</strong><br>
                                    <input type="url" id="return-link" placeholder="CheckFelix Link...">
                                </div>
                                <div class="flight-info">
                                    <strong>Von:</strong><br>Jakarta (JKT)
                                </div>
                                <div class="flight-info">
                                    <strong>Nach:</strong><br>Salzburg (SZG)
                                </div>
                                <div class="flight-info">
                                    <strong>Personen:</strong><br>2 Erwachsene
                                </div>
                                <div class="flight-info">
                                    <strong>Airline:</strong><br>
                                    <input type="text" id="return-airline" placeholder="z.B. Emirates" onchange="updateBudget()">
                                </div>
                            </div>
                            <div class="editable-section">
                                <label><strong>üí∞ Preis pro Person:</strong></label>
                                <input type="number" id="return-price" placeholder="Preis" onchange="updateBudget()" value="0">
                                <p class="price-per-person">F√ºr 2 Personen: <span id="return-total">‚Ç¨0</span></p>
                                <button class="link-button" onclick="openFlightLink('return')" id="return-link-btn" style="display: none; margin-top: 10px;">üîó Link √∂ffnen</button>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <strong>‚ú® Lounge-Tipp:</strong> Dubai Airport hat tolle Lounges! Check ob deine Kreditkarte (z.B. Priority Pass) Zugang bietet. Perfekt zum Entspannen w√§hrend des Stopover!
                        </div>
                    </div>

                    <!-- Route Tab -->
                    <div id="route" class="tab-content">
                        <h2 class="card-title"><span class="icon">üó∫Ô∏è</span> Route & Hotels (15 N√§chte)</h2>
                        
                        <div class="alert alert-info">
                            <strong>üå∫ Deine optimale Route:</strong> Bali ‚Üí Java ‚Üí Jakarta ‚Ä¢ Zero Stress ‚Ä¢ Zero R√ºckwege!<br>
                            <strong>üí° Tipp:</strong> Du kannst jeden Stop √§ndern, l√∂schen oder neue Stops hinzuf√ºgen!
                        </div>

                        <div class="timeline" id="route-timeline">
                            <!-- Tag 1: Ankunft -->
                            <div class="timeline-item">
                                <div class="day-number">Tag 1 ‚Ä¢ 20. Aug</div>
                                <strong>‚úàÔ∏è Ankunft Bali (DPS)</strong>
                                <p>Flug Salzburg ‚Üí Bali ‚Ä¢ Transfer zu Hotel Ubud (ca. 1.5h)</p>
                            </div>

                            <!-- UBUD 4 N√§chte -->
                            <div class="timeline-item" style="background: #e8f5e9; border-left-color: #4caf50;">
                                <div class="day-number" style="background: #4caf50;">Tag 2-5 ‚Ä¢ 21.-24. Aug ‚Ä¢ 4 N√ÑCHTE</div>
                                <strong>üü© 1. UBUD ‚Äì Jungle, Tempel, Wasserf√§lle, Spa</strong>
                                <p style="margin-top: 10px; color: #666;">
                                    üìç Perfekter Start ‚Äì runterkommen, Bali-Vibes f√ºhlen<br>
                                    ‚è±Ô∏è Transfer: Flughafen ‚Üí Ubud = 1,5 h
                                </p>
                                
                                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                                    <strong>üè® Hotel in Ubud:</strong>
                                    <div style="margin-top: 10px;">
                                        <input type="text" id="ubud-hotel-name" placeholder="Hotel-Name (z.B. Bambootel Sawah View)" style="width: 100%; margin-bottom: 10px;">
                                        <input type="url" id="ubud-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <input type="number" id="ubud-nights" value="4" placeholder="N√§chte" readonly style="background: #f0f0f0;">
                                            <input type="number" id="ubud-price" placeholder="‚Ç¨ Preis/Nacht" onchange="updateRouteHotels()">
                                        </div>
                                        <button class="link-button" onclick="openRouteLink('ubud-hotel-link')" style="width: 100%; margin-top: 10px;">üîó Hotel √∂ffnen</button>
                                        <p style="margin-top: 5px; font-weight: bold;">Gesamt: <span id="ubud-total">‚Ç¨0</span></p>
                                    </div>
                                </div>

                                <div style="margin-top: 10px; padding: 10px; background: rgba(76,175,80,0.1); border-radius: 8px;">
                                    <strong>üí° Must-Do:</strong> Tegallalang Reisterrassen, Tirta Empul Tempel, Goa Gajah, Tegenungan Wasserfall, Spa!
                                </div>
                            </div>

                            <!-- SIDEMEN 2 N√§chte -->
                            <div class="timeline-item" style="background: #e3f2fd; border-left-color: #2196f3;">
                                <div class="day-number" style="background: #2196f3;">Tag 6-7 ‚Ä¢ 25.-26. Aug ‚Ä¢ 2 N√ÑCHTE</div>
                                <strong>üü¶ 2. SIDEMEN ‚Äì Bali's magischster Ort</strong>
                                <p style="margin-top: 10px; color: #666;">
                                    üìç Berge, Reisfelder, Ruhe, Spiritualit√§t, Lempuyang Tempel<br>
                                    ‚è±Ô∏è Transfer: Ubud ‚Üí Sidemen = 1 h
                                </p>
                                
                                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                                    <strong>üè® Hotel in Sidemen:</strong>
                                    <div style="margin-top: 10px;">
                                        <input type="text" id="sidemen-hotel-name" placeholder="Hotel-Name" style="width: 100%; margin-bottom: 10px;">
                                        <input type="url" id="sidemen-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <input type="number" id="sidemen-nights" value="2" placeholder="N√§chte" readonly style="background: #f0f0f0;">
                                            <input type="number" id="sidemen-price" placeholder="‚Ç¨ Preis/Nacht" onchange="updateRouteHotels()">
                                        </div>
                                        <button class="link-button" onclick="openRouteLink('sidemen-hotel-link')" style="width: 100%; margin-top: 10px;">üîó Hotel √∂ffnen</button>
                                        <p style="margin-top: 5px; font-weight: bold;">Gesamt: <span id="sidemen-total">‚Ç¨0</span></p>
                                    </div>
                                </div>
                            </div>

                            <!-- AMED 1 Nacht -->
                            <div class="timeline-item" style="background: #fff3e0; border-left-color: #ff9800;">
                                <div class="day-number" style="background: #ff9800;">Tag 8 ‚Ä¢ 27. Aug ‚Ä¢ 1 NACHT</div>
                                <strong>üüß 3. AMED ‚Äì Zwischenstopp + Vulkanblick + Water Palace</strong>
                                <p style="margin-top: 10px; color: #666;">
                                    üìç Perfekte Logistik zum Boot + wundersch√∂n<br>
                                    ‚è±Ô∏è Transfer: Sidemen ‚Üí Amed = 1 h
                                </p>
                                
                                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                                    <strong>üè® Hotel in Amed:</strong>
                                    <div style="margin-top: 10px;">
                                        <input type="text" id="amed-hotel-name" placeholder="Hotel-Name" style="width: 100%; margin-bottom: 10px;">
                                        <input type="url" id="amed-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <input type="number" id="amed-nights" value="1" placeholder="N√§chte" readonly style="background: #f0f0f0;">
                                            <input type="number" id="amed-price" placeholder="‚Ç¨ Preis/Nacht" onchange="updateRouteHotels()">
                                        </div>
                                        <button class="link-button" onclick="openRouteLink('amed-hotel-link')" style="width: 100%; margin-top: 10px;">üîó Hotel √∂ffnen</button>
                                        <p style="margin-top: 5px; font-weight: bold;">Gesamt: <span id="amed-total">‚Ç¨0</span></p>
                                    </div>
                                </div>
                            </div>

                            <!-- GILI 2 N√§chte -->
                            <div class="timeline-item" style="background: #e0f7fa; border-left-color: #00bcd4;">
                                <div class="day-number" style="background: #00bcd4;">Tag 9-10 ‚Ä¢ 28.-29. Aug ‚Ä¢ 2 N√ÑCHTE</div>
                                <strong>üü® 4. GILI AIR oder GILI MENO ‚Äì Paradies!</strong>
                                <p style="margin-top: 10px; color: #666;">
                                    üíô <strong>Gili Air</strong> (empfohlen!): jung, stylisch, t√ºrkisblau, Beach Vibes<br>
                                    ü§ç <strong>Gili Meno</strong>: ruhiger, romantischer, weniger Menschen<br>
                                    ‚è±Ô∏è Transfer: Amed ‚Üí Gili = 45-60 min Fastboat
                                </p>
                                
                                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                                    <strong>üè® Hotel auf Gili:</strong>
                                    <div style="margin-top: 10px;">
                                        <select id="gili-island" style="width: 100%; margin-bottom: 10px;">
                                            <option value="">Insel w√§hlen...</option>
                                            <option value="Gili Air">üíô Gili Air (jung & stylisch)</option>
                                            <option value="Gili Meno">ü§ç Gili Meno (ruhig & romantisch)</option>
                                            <option value="Gili Trawangan">üéâ Gili Trawangan (Party-Insel)</option>
                                        </select>
                                        <input type="text" id="gili-hotel-name" placeholder="Hotel-Name" style="width: 100%; margin-bottom: 10px;">
                                        <input type="url" id="gili-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <input type="number" id="gili-nights" value="2" placeholder="N√§chte" readonly style="background: #f0f0f0;">
                                            <input type="number" id="gili-price" placeholder="‚Ç¨ Preis/Nacht" onchange="updateRouteHotels()">
                                        </div>
                                        <button class="link-button" onclick="openRouteLink('gili-hotel-link')" style="width: 100%; margin-top: 10px;">üîó Hotel √∂ffnen</button>
                                        <p style="margin-top: 5px; font-weight: bold;">Gesamt: <span id="gili-total">‚Ç¨0</span></p>
                                    </div>
                                </div>
                            </div>

                            <!-- JAVA IJEN 2 N√§chte -->
                            <div class="timeline-item" style="background: #efebe9; border-left-color: #795548;">
                                <div class="day-number" style="background: #795548;">Tag 11-12 ‚Ä¢ 30.-31. Aug ‚Ä¢ 2 N√ÑCHTE</div>
                                <strong>üü´ 5. JAVA (Ijen Vulkan) ‚Äì Dschungel-Lodge + Kratersee</strong>
                                <p style="margin-top: 10px; color: #666;">
                                    üìç Ber√ºhmtester t√ºrkisblauer Kratersee der Welt<br>
                                    ‚è±Ô∏è Gili ‚Üí Padangbai (Boot 1,5-2h) ‚Üí F√§hre Java (30 min) ‚Üí Hotel (30 min)
                                </p>
                                
                                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                                    <strong>üè® Hotel bei Ijen:</strong>
                                    <div style="margin-top: 10px;">
                                        <input type="text" id="ijen-hotel-name" placeholder="Hotel-Name (z.B. Dschungel-Lodge)" style="width: 100%; margin-bottom: 10px;">
                                        <input type="url" id="ijen-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <input type="number" id="ijen-nights" value="2" placeholder="N√§chte" readonly style="background: #f0f0f0;">
                                            <input type="number" id="ijen-price" placeholder="‚Ç¨ Preis/Nacht" onchange="updateRouteHotels()">
                                        </div>
                                        <button class="link-button" onclick="openRouteLink('ijen-hotel-link')" style="width: 100%; margin-top: 10px;">üîó Hotel √∂ffnen</button>
                                        <p style="margin-top: 5px; font-weight: bold;">Gesamt: <span id="ijen-total">‚Ç¨0</span></p>
                                    </div>
                                </div>

                                <div style="margin-top: 10px; padding: 10px; background: rgba(121,85,72,0.1); border-radius: 8px;">
                                    <strong>üí° Tipp:</strong> Sunrise-Tour optional (02:00 Start) - aber mit 2 N√§chten kein Stress!
                                </div>
                            </div>

                            <!-- BROMO 1 Nacht -->
                            <div class="timeline-item" style="background: #ffebee; border-left-color: #f44336;">
                                <div class="day-number" style="background: #f44336;">Tag 13 ‚Ä¢ 1. Sep ‚Ä¢ 1 NACHT</div>
                                <strong>üü• 6. BROMO ‚Äì Fantasy-Landschaft!</strong>
                                <p style="margin-top: 10px; color: #666;">
                                    üìç Einzigartige Nebelmeerlandschaft ‚Ä¢ Vulkan-Plateau<br>
                                    ‚è±Ô∏è Ijen ‚Üí Probolinggo (Zug 4-4,5h) ‚Üí Bromo Hotel (1h)
                                </p>
                                
                                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                                    <strong>üè® Hotel bei Bromo:</strong>
                                    <div style="margin-top: 10px;">
                                        <input type="text" id="bromo-hotel-name" placeholder="Hotel-Name" style="width: 100%; margin-bottom: 10px;">
                                        <input type="url" id="bromo-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <input type="number" id="bromo-nights" value="1" placeholder="N√§chte" readonly style="background: #f0f0f0;">
                                            <input type="number" id="bromo-price" placeholder="‚Ç¨ Preis/Nacht" onchange="updateRouteHotels()">
                                        </div>
                                        <button class="link-button" onclick="openRouteLink('bromo-hotel-link')" style="width: 100%; margin-top: 10px;">üîó Hotel √∂ffnen</button>
                                        <p style="margin-top: 5px; font-weight: bold;">Gesamt: <span id="bromo-total">‚Ç¨0</span></p>
                                    </div>
                                </div>
                            </div>

                            <!-- YOGYAKARTA 2 N√§chte -->
                            <div class="timeline-item" style="background: #f3e5f5; border-left-color: #9c27b0;">
                                <div class="day-number" style="background: #9c27b0;">Tag 14-15 ‚Ä¢ 2.-3. Sep ‚Ä¢ 2 N√ÑCHTE</div>
                                <strong>üü™ 7. YOGYAKARTA ‚Äì Borobudur + Prambanan</strong>
                                <p style="margin-top: 10px; color: #666;">
                                    üìç 2 UNESCO-Wunder ‚Ä¢ Tempel-Magie ‚Ä¢ Kultur<br>
                                    ‚è±Ô∏è Bromo ‚Üí Yogyakarta = 4-5 h Zug (entspannt!)
                                </p>
                                
                                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                                    <strong>üè® Hotel in Yogyakarta:</strong>
                                    <div style="margin-top: 10px;">
                                        <input type="text" id="yogya-hotel-name" placeholder="Hotel-Name" style="width: 100%; margin-bottom: 10px;">
                                        <input type="url" id="yogya-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <input type="number" id="yogya-nights" value="2" placeholder="N√§chte" readonly style="background: #f0f0f0;">
                                            <input type="number" id="yogya-price" placeholder="‚Ç¨ Preis/Nacht" onchange="updateRouteHotels()">
                                        </div>
                                        <button class="link-button" onclick="openRouteLink('yogya-hotel-link')" style="width: 100%; margin-top: 10px;">üîó Hotel √∂ffnen</button>
                                        <p style="margin-top: 5px; font-weight: bold;">Gesamt: <span id="yogya-total">‚Ç¨0</span></p>
                                    </div>
                                </div>

                                <div style="margin-top: 10px; padding: 10px; background: rgba(156,39,176,0.1); border-radius: 8px;">
                                    <strong>üí° Must-See:</strong> Borobudur Sunrise, Prambanan Sunset - beide UNESCO-Welterbe!
                                </div>
                            </div>

                            <!-- JAKARTA 1 Nacht -->
                            <div class="timeline-item" style="background: #e1f5fe; border-left-color: #03a9f4;">
                                <div class="day-number" style="background: #03a9f4;">Tag 16 ‚Ä¢ 4. Sep ‚Ä¢ 1 NACHT</div>
                                <strong>üü¶ 8. JAKARTA ‚Äì Nur f√ºr Abflug</strong>
                                <p style="margin-top: 10px; color: #666;">
                                    üìç Sch√∂nes Hotel + relaxen vor dem Flug<br>
                                    ‚è±Ô∏è Yogyakarta ‚Üí Jakarta = 6-7 h Zug (super angenehm!)
                                </p>
                                
                                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                                    <strong>üè® Hotel in Jakarta:</strong>
                                    <div style="margin-top: 10px;">
                                        <input type="text" id="jakarta-hotel-name" placeholder="Hotel-Name (nahe Flughafen)" style="width: 100%; margin-bottom: 10px;">
                                        <input type="url" id="jakarta-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <input type="number" id="jakarta-nights" value="1" placeholder="N√§chte" readonly style="background: #f0f0f0;">
                                            <input type="number" id="jakarta-price" placeholder="‚Ç¨ Preis/Nacht" onchange="updateRouteHotels()">
                                        </div>
                                        <button class="link-button" onclick="openRouteLink('jakarta-hotel-link')" style="width: 100%; margin-top: 10px;">üîó Hotel √∂ffnen</button>
                                        <p style="margin-top: 5px; font-weight: bold;">Gesamt: <span id="jakarta-total">‚Ç¨0</span></p>
                                    </div>
                                </div>
                            </div>

                            <!-- Tag 17: Abreise -->
                            <div class="timeline-item">
                                <div class="day-number">Tag 17 ‚Ä¢ 5. Sep</div>
                                <strong>‚úàÔ∏è Abreise Jakarta ‚Üí Salzburg</strong>
                                <p>Transfer zum Flughafen ‚Ä¢ Heimflug</p>
                            </div>
                        </div>

                        <div class="alert" style="margin-top: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;">
                            <strong>‚ú® GESAMT: 15 N√§chte (war vorher falsch - du hast 16 Tage = 15 N√§chte!)</strong><br>
                            4 + 2 + 1 + 2 + 2 + 1 + 2 + 1 = 15 N√§chte<br>
                            Perfekte Balance ‚Ä¢ Null Stress ‚Ä¢ Nur Highlights!
                        </div>
                    </div>

                    <!-- Activities Tab -->
                    <div id="activities" class="tab-content">
                        <h2 class="card-title"><span class="icon">üéØ</span> Aktivit√§ten & Erlebnisse</h2>

                        <div class="alert">
                            <strong>üí∞ Budget-Tipp:</strong> Rechne pro Tag ca. ‚Ç¨30-80 f√ºr Aktivit√§ten (je nach Luxuslevel)
                        </div>

                        <!-- Create New Category -->
                        <div style="background: #1a202c; padding: 20px; border-radius: 12px; margin-bottom: 20px; color: white;">
                            <h3 style="margin-bottom: 15px; font-weight: 600;">‚ûï Neue Kategorie erstellen</h3>
                            <div style="display: grid; grid-template-columns: 1fr auto; gap: 10px;">
                                <input type="text" id="new-category-name" placeholder="z.B. 'Ubud Aktivit√§ten', 'Restaurants Seminyak', 'Wasserf√§lle'..." style="background: white; color: #333; border: none;">
                                <button onclick="addCategory()" style="background: #3b82f6; white-space: nowrap;">üìÅ Kategorie hinzuf√ºgen</button>
                            </div>
                        </div>

                        <!-- Categories Container -->
                        <div id="categories-container">
                            <!-- Default Category: Inspiration -->
                            <div class="category-folder" id="category-inspiration">
                                <div class="category-header" onclick="toggleCategory('inspiration')">
                                    <span class="category-icon">üí°</span>
                                    <span class="category-name">Inspiration & Empfehlungen</span>
                                    <span class="category-toggle">‚ñº</span>
                                </div>
                                <div class="category-content" style="display: block;">
                                    <h4 style="margin: 15px 0 10px 0;">üçΩÔ∏è Restaurant-Empfehlungen</h4>
                                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                        <strong>üåü Ubud Must-Try:</strong>
                                        <ul style="margin-left: 20px; margin-top: 10px;">
                                            <li><strong>Locavore</strong> - Fine Dining, Instagram-worthy (‚Ç¨‚Ç¨‚Ç¨‚Ç¨)</li>
                                            <li><strong>Swept Away</strong> - Am Fluss, romantisch (‚Ç¨‚Ç¨‚Ç¨)</li>
                                            <li><strong>Warung Biah Biah</strong> - Local & g√ºnstig (‚Ç¨)</li>
                                            <li><strong>Jungle Fish Bar</strong> - Pool + View (‚Ç¨‚Ç¨)</li>
                                        </ul>
                                    </div>

                                    <h4 style="margin: 15px 0 10px 0;">üèõÔ∏è Tempel & Kultur</h4>
                                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Tirta Empul</strong> - Heilige Quelle & Reinigungszeremonie (‚Ç¨5)</li>
                                            <li><strong>Pura Gunung Kawi</strong> - Tempel im Dschungel (‚Ç¨3)</li>
                                            <li><strong>Goa Gajah</strong> - Elefantenh√∂hle (‚Ç¨3)</li>
                                            <li><strong>Tegallalang Reisterrassen</strong> - Instagram-Spot! (‚Ç¨2-5)</li>
                                        </ul>
                                    </div>

                                    <h4 style="margin: 15px 0 10px 0;">üíÜ Wellness & Spa</h4>
                                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Bambootel Spa</strong> - Im Hotel, super! (‚Ç¨40-80)</li>
                                            <li><strong>Karsa Spa</strong> - Dschungel-Setting (‚Ç¨30-60)</li>
                                            <li><strong>Ubud Traditional Spa</strong> - Authentisch (‚Ç¨20-40)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="alert" style="margin-top: 20px;">
                            <strong>üí° Insider:</strong> Viele Hotels bieten kostenlose Aktivit√§ten (Yoga, Reisfeldwanderung, Cooking Class). Immer nachfragen!
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Budget -->
            <div>
                <div class="card budget-overview">
                    <h2 style="margin-bottom: 20px; font-size: 1.8em;">üí∞ Budget-√úbersicht</h2>
                    <p style="font-size: 0.9em; margin-bottom: 20px;">f√ºr 2 Personen</p>

                    <div class="budget-item">
                        <span>‚úàÔ∏è Fl√ºge</span>
                        <span id="budget-flights">‚Ç¨0</span>
                    </div>

                    <div class="budget-item">
                        <span>üè® Hotels</span>
                        <span id="budget-hotels">‚Ç¨0</span>
                    </div>

                    <div class="budget-item">
                        <span>üöó Transport</span>
                        <span id="budget-transport">‚Ç¨0</span>
                    </div>

                    <div class="budget-item">
                        <span>üéØ Aktivit√§ten</span>
                        <span id="budget-activities">‚Ç¨0</span>
                    </div>

                    <div class="budget-item">
                        <span>üçΩÔ∏è Essen & Trinken</span>
                        <span id="budget-food">‚Ç¨0</span>
                    </div>

                    <div class="budget-total">
                        <div style="font-size: 0.5em; margin-bottom: 10px;">GESAMTKOSTEN</div>
                        <div id="budget-total">‚Ç¨840</div>
                        <div style="font-size: 0.4em; margin-top: 10px;">Pro Person: <span id="budget-per-person">‚Ç¨420</span></div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.08); border-radius: 10px;">
                        <h3 style="margin-bottom: 15px; font-size: 1.1em;">üìä Budget-Kalkulator</h3>
                        <p style="font-size: 0.9em; opacity: 0.9; margin-bottom: 15px;">Trage deine gesch√§tzten Tageskosten ein:</p>
                        
                        <label style="display: block; margin-top: 15px; font-size: 0.95em;">üöó Transport/Tag (‚Ç¨):</label>
                        <input type="number" id="transport-daily" value="0" onchange="updateBudget()" style="background: white; color: #333;" placeholder="z.B. 50">
                        
                        <label style="display: block; margin-top: 15px; font-size: 0.95em;">üçΩÔ∏è Essen/Person/Tag (‚Ç¨):</label>
                        <input type="number" id="food-daily" value="0" onchange="updateBudget()" style="background: white; color: #333;" placeholder="z.B. 30-50">
                        
                        <label style="display: block; margin-top: 15px; font-size: 0.95em;">üéØ Aktivit√§ten/Tag (‚Ç¨):</label>
                        <input type="number" id="activities-daily" value="0" onchange="updateBudget()" style="background: white; color: #333;" placeholder="z.B. 30-80">

                        <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
                            <strong>Reisetage:</strong> <span id="trip-days">16</span> Tage
                        </p>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.08); border-radius: 10px; font-size: 0.9em;">
                        <strong style="font-size: 1em;">üí° Budget-Tipps:</strong>
                        <ul style="margin-left: 20px; margin-top: 10px; opacity: 0.9;">
                            <li>Street Food: ‚Ç¨5-10/Person</li>
                            <li>Restaurant: ‚Ç¨15-30/Person</li>
                            <li>Fine Dining: ‚Ç¨50+/Person</li>
                            <li>Private Driver: ‚Ç¨40-60/Tag</li>
                            <li>Spa: ‚Ç¨20-80/Treatment</li>
                        </ul>
                    </div>
                </div>

                <!-- Quick Tips Card -->
                <div class="card" style="margin-top: 20px; background: #f8fafc; border: 1px solid #e2e8f0;">
                    <h3 style="margin-bottom: 15px; color: #1a202c; font-weight: 600;">‚ö° Quick Tips</h3>
                    <ul style="line-height: 1.8; color: #475569;">
                        <li>üì± SIM-Karte am Flughafen kaufen (ca. ‚Ç¨10)</li>
                        <li>üíµ Immer etwas Cash (IDR) dabei haben</li>
                        <li>üß¥ Sonnencreme & M√ºckenschutz!</li>
                        <li>üëó Sarong f√ºr Tempel mitnehmen</li>
                        <li>üíä Reiseapotheke nicht vergessen</li>
                        <li>üèçÔ∏è Roller mieten = Freiheit! (‚Ç¨5/Tag)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="card" style="text-align: center; background: #1a202c; color: white; border: none;">
            <p style="font-size: 1.2em; font-weight: 500;">
                üå¥ Viel Spa√ü bei der Planung deiner Traumreise! üå¥
            </p>
            <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.8;">
                Passe alle Werte an und behalte dein Budget im Blick!
            </p>
        </div>
    </div>

    <script>
        let hotelCounter = 1;
        let activityCounter = 0;
        let categoryCounter = 0;
        let categories = {};

        // Route stops data
        let routeStops = [
            {
                id: 'arrival',
                day: 'Tag 1 ‚Ä¢ 20. Aug',
                title: '‚úàÔ∏è Ankunft Bali (DPS)',
                description: 'Flug Salzburg ‚Üí Bali ‚Ä¢ Transfer zu Hotel Ubud (ca. 1.5h)',
                isHotel: false
            },
            {
                id: 'ubud',
                day: 'Tag 2-5 ‚Ä¢ 21.-24. Aug ‚Ä¢ 4 N√ÑCHTE',
                dayBg: '#e8f5e9',
                dayColor: '#4caf50',
                borderColor: '#4caf50',
                emoji: 'üü©',
                title: '1. UBUD ‚Äì Jungle, Tempel, Wasserf√§lle, Spa',
                description: 'üìç Perfekter Start ‚Äì runterkommen, Bali-Vibes f√ºhlen<br>‚è±Ô∏è Transfer: Flughafen ‚Üí Ubud = 1,5 h',
                tip: 'üí° Must-Do: Tegallalang Reisterrassen, Tirta Empul Tempel, Goa Gajah, Tegenungan Wasserfall, Spa!',
                nights: 4,
                isHotel: true,
                location: 'Ubud'
            },
            {
                id: 'sidemen',
                day: 'Tag 6-7 ‚Ä¢ 25.-26. Aug ‚Ä¢ 2 N√ÑCHTE',
                dayBg: '#e3f2fd',
                dayColor: '#2196f3',
                borderColor: '#2196f3',
                emoji: 'üü¶',
                title: '2. SIDEMEN ‚Äì Bali\'s magischster Ort',
                description: 'üìç Berge, Reisfelder, Ruhe, Spiritualit√§t, Lempuyang Tempel<br>‚è±Ô∏è Transfer: Ubud ‚Üí Sidemen = 1 h',
                nights: 2,
                isHotel: true,
                location: 'Sidemen'
            },
            {
                id: 'amed',
                day: 'Tag 8 ‚Ä¢ 27. Aug ‚Ä¢ 1 NACHT',
                dayBg: '#fff3e0',
                dayColor: '#ff9800',
                borderColor: '#ff9800',
                emoji: 'üüß',
                title: '3. AMED ‚Äì Zwischenstopp + Vulkanblick + Water Palace',
                description: 'üìç Perfekte Logistik zum Boot + wundersch√∂n<br>‚è±Ô∏è Transfer: Sidemen ‚Üí Amed = 1 h',
                nights: 1,
                isHotel: true,
                location: 'Amed'
            },
            {
                id: 'gili',
                day: 'Tag 9-10 ‚Ä¢ 28.-29. Aug ‚Ä¢ 2 N√ÑCHTE',
                dayBg: '#e0f7fa',
                dayColor: '#00bcd4',
                borderColor: '#00bcd4',
                emoji: 'üü®',
                title: '4. GILI AIR oder GILI MENO ‚Äì Paradies!',
                description: 'üíô <strong>Gili Air</strong> (empfohlen!): jung, stylisch, t√ºrkisblau, Beach Vibes<br>ü§ç <strong>Gili Meno</strong>: ruhiger, romantischer, weniger Menschen<br>‚è±Ô∏è Transfer: Amed ‚Üí Gili = 45-60 min Fastboat',
                nights: 2,
                isHotel: true,
                location: 'Gili',
                hasIslandChoice: true
            },
            {
                id: 'ijen',
                day: 'Tag 11-12 ‚Ä¢ 30.-31. Aug ‚Ä¢ 2 N√ÑCHTE',
                dayBg: '#efebe9',
                dayColor: '#795548',
                borderColor: '#795548',
                emoji: 'üü´',
                title: '5. JAVA (Ijen Vulkan) ‚Äì Dschungel-Lodge + Kratersee',
                description: 'üìç Ber√ºhmtester t√ºrkisblauer Kratersee der Welt<br>‚è±Ô∏è Gili ‚Üí Padangbai (Boot 1,5-2h) ‚Üí F√§hre Java (30 min) ‚Üí Hotel (30 min)',
                tip: 'üí° Tipp: Sunrise-Tour optional (02:00 Start) - aber mit 2 N√§chten kein Stress!',
                nights: 2,
                isHotel: true,
                location: 'Ijen'
            },
            {
                id: 'bromo',
                day: 'Tag 13 ‚Ä¢ 1. Sep ‚Ä¢ 1 NACHT',
                dayBg: '#ffebee',
                dayColor: '#f44336',
                borderColor: '#f44336',
                emoji: 'üü•',
                title: '6. BROMO ‚Äì Fantasy-Landschaft!',
                description: 'üìç Einzigartige Nebelmeerlandschaft ‚Ä¢ Vulkan-Plateau<br>‚è±Ô∏è Ijen ‚Üí Probolinggo (Zug 4-4,5h) ‚Üí Bromo Hotel (1h)',
                nights: 1,
                isHotel: true,
                location: 'Bromo'
            },
            {
                id: 'yogya',
                day: 'Tag 14-15 ‚Ä¢ 2.-3. Sep ‚Ä¢ 2 N√ÑCHTE',
                dayBg: '#f3e5f5',
                dayColor: '#9c27b0',
                borderColor: '#9c27b0',
                emoji: 'üü™',
                title: '7. YOGYAKARTA ‚Äì Borobudur + Prambanan',
                description: 'üìç 2 UNESCO-Wunder ‚Ä¢ Tempel-Magie ‚Ä¢ Kultur<br>‚è±Ô∏è Bromo ‚Üí Yogyakarta = 4-5 h Zug (entspannt!)',
                tip: 'üí° Must-See: Borobudur Sunrise, Prambanan Sunset - beide UNESCO-Welterbe!',
                nights: 2,
                isHotel: true,
                location: 'Yogyakarta'
            },
            {
                id: 'jakarta',
                day: 'Tag 16 ‚Ä¢ 4. Sep ‚Ä¢ 1 NACHT',
                dayBg: '#e1f5fe',
                dayColor: '#03a9f4',
                borderColor: '#03a9f4',
                emoji: 'üü¶',
                title: '8. JAKARTA ‚Äì Nur f√ºr Abflug',
                description: 'üìç Sch√∂nes Hotel + relaxen vor dem Flug<br>‚è±Ô∏è Yogyakarta ‚Üí Jakarta = 6-7 h Zug (super angenehm!)',
                nights: 1,
                isHotel: true,
                location: 'Jakarta'
            },
            {
                id: 'departure',
                day: 'Tag 17 ‚Ä¢ 5. Sep',
                title: '‚úàÔ∏è Abreise Jakarta ‚Üí Salzburg',
                description: 'Transfer zum Flughafen ‚Ä¢ Heimflug',
                isHotel: false
            }
        ];

        // Generate route timeline
        function generateRouteTimeline() {
            const timeline = document.getElementById('route-timeline');
            if (!timeline) return;

            timeline.innerHTML = '';

            routeStops.forEach((stop, index) => {
                const item = document.createElement('div');
                item.className = 'timeline-item';
                
                if (stop.dayBg) {
                    item.style.background = stop.dayBg;
                    item.style.borderLeftColor = stop.borderColor;
                }

                let content = `
                    <div class="day-number" ${stop.dayColor ? `style="background: ${stop.dayColor};"` : ''}>${stop.day}</div>
                    <strong>${stop.emoji || ''} ${stop.title}</strong>
                    <p style="margin-top: 10px; color: #666;">${stop.description}</p>
                `;

                if (stop.isHotel) {
                    content += `
                        <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 10px;">
                            <strong>üè® Hotel in ${stop.location}:</strong>
                            <div style="margin-top: 10px;">
                                ${stop.hasIslandChoice ? `
                                    <select id="${stop.id}-island" style="width: 100%; margin-bottom: 10px; padding: 10px; border: 2px solid #ddd; border-radius: 8px;">
                                        <option value="">Insel w√§hlen...</option>
                                        <option value="Gili Air">üíô Gili Air (jung & stylisch)</option>
                                        <option value="Gili Meno">ü§ç Gili Meno (ruhig & romantisch)</option>
                                        <option value="Gili Trawangan">üéâ Gili Trawangan (Party-Insel)</option>
                                    </select>
                                ` : ''}
                                <input type="text" id="${stop.id}-hotel-name" placeholder="Hotel-Name (z.B. f√ºr Ubud: Bambootel Sawah View)" style="width: 100%; margin-bottom: 10px; padding: 10px; border: 2px solid #ddd; border-radius: 8px;">
                                <input type="url" id="${stop.id}-hotel-link" placeholder="üîó Booking.com Link" style="width: 100%; margin-bottom: 10px; padding: 10px; border: 2px solid #ddd; border-radius: 8px;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <div>
                                        <label style="font-size: 0.9em; color: #666;"><strong>N√§chte:</strong></label>
                                        <input type="number" id="${stop.id}-nights" value="${stop.nights}" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; background: #f0f0f0;" readonly>
                                    </div>
                                    <div>
                                        <label style="font-size: 0.9em; color: #666;"><strong>‚Ç¨ Preis/Nacht:</strong></label>
                                        <input type="number" id="${stop.id}-price" placeholder="Preis" onchange="updateRouteHotels()" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px;">
                                    </div>
                                </div>
                                <textarea id="${stop.id}-notes" placeholder="üìù Notizen (z.B. Pool Villa buchen, Transfer anfragen...)" style="width: 100%; margin-top: 10px; padding: 10px; border: 2px solid #ddd; border-radius: 8px; min-height: 60px;"></textarea>
                                <div style="display: flex; gap: 10px; margin-top: 10px;">
                                    <button class="link-button" onclick="openRouteLink('${stop.id}-hotel-link')" id="${stop.id}-hotel-link-btn" style="flex: 1; display: none;">üîó Hotel √∂ffnen</button>
                                </div>
                                <p style="margin-top: 10px; font-weight: bold; font-size: 1.1em; color: #333;">Gesamt: <span id="${stop.id}-total">‚Ç¨0</span></p>
                            </div>
                        </div>
                    `;

                    // Add event listener after element is added to DOM
                    setTimeout(() => {
                        const linkInput = document.getElementById(`${stop.id}-hotel-link`);
                        const linkBtn = document.getElementById(`${stop.id}-hotel-link-btn`);
                        if (linkInput && linkBtn) {
                            linkInput.addEventListener('input', function() {
                                linkBtn.style.display = this.value ? 'block' : 'none';
                            });
                        }
                    }, 100);
                }

                if (stop.tip) {
                    content += `
                        <div style="margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.05); border-radius: 8px;">
                            <strong>${stop.tip}</strong>
                        </div>
                    `;
                }

                item.innerHTML = content;
                timeline.appendChild(item);
            });

            // Add summary
            const summary = document.createElement('div');
            summary.className = 'alert';
            summary.style.cssText = 'margin-top: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;';
            summary.innerHTML = `
                <strong>‚ú® GESAMT: 15 N√§chte</strong><br>
                4 + 2 + 1 + 2 + 2 + 1 + 2 + 1 = 15 N√§chte<br>
                Perfekte Balance ‚Ä¢ Null Stress ‚Ä¢ Nur Highlights!
            `;
            timeline.appendChild(summary);
        }

        // Flight link listeners
        document.addEventListener('DOMContentLoaded', function() {
            setupLinkButton('outbound-link', 'outbound-link-btn');
            setupLinkButton('return-link', 'return-link-btn');
            generateRouteTimeline();
        });

        function setupLinkButton(linkId, btnId) {
            const linkInput = document.getElementById(linkId);
            const btn = document.getElementById(btnId);
            if (linkInput && btn) {
                linkInput.addEventListener('input', function() {
                    btn.style.display = this.value ? 'inline-block' : 'none';
                });
            }
        }

        function openFlightLink(type) {
            const link = document.getElementById(type + '-link').value;
            if (link) {
                window.open(link, '_blank');
            }
        }

        function openRouteLink(linkId) {
            const link = document.getElementById(linkId).value;
            if (link) {
                window.open(link, '_blank');
            }
        }

        function updateRouteHotels() {
            let routeHotelsTotal = 0;

            routeStops.forEach(stop => {
                if (stop.isHotel) {
                    const nights = parseFloat(document.getElementById(stop.id + '-nights')?.value) || 0;
                    const price = parseFloat(document.getElementById(stop.id + '-price')?.value) || 0;
                    const total = nights * price;
                    const totalEl = document.getElementById(stop.id + '-total');
                    if (totalEl) {
                        totalEl.textContent = '‚Ç¨' + total.toFixed(0);
                    }
                    routeHotelsTotal += total;
                }
            });

            // Update main hotels budget
            updateBudget();
        }

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function updateBudget() {
            // Calculate flights
            const outboundPrice = parseFloat(document.getElementById('outbound-price').value) || 0;
            const returnPrice = parseFloat(document.getElementById('return-price').value) || 0;
            const flightsTotal = (outboundPrice + returnPrice) * 2;
            
            document.getElementById('outbound-total').textContent = '‚Ç¨' + (outboundPrice * 2).toFixed(0);
            document.getElementById('return-total').textContent = '‚Ç¨' + (returnPrice * 2).toFixed(0);
            document.getElementById('budget-flights').textContent = '‚Ç¨' + flightsTotal.toFixed(0);

            // Calculate hotels from route
            let hotelsTotal = 0;
            
            routeStops.forEach(stop => {
                if (stop.isHotel) {
                    const nights = parseFloat(document.getElementById(stop.id + '-nights')?.value) || 0;
                    const price = parseFloat(document.getElementById(stop.id + '-price')?.value) || 0;
                    hotelsTotal += nights * price;
                }
            });

            document.getElementById('budget-hotels').textContent = '‚Ç¨' + hotelsTotal.toFixed(0);

            // Calculate daily expenses
            const tripDays = 16;
            const transportDaily = parseFloat(document.getElementById('transport-daily').value) || 0;
            const foodDaily = parseFloat(document.getElementById('food-daily').value) || 0;
            const activitiesDaily = parseFloat(document.getElementById('activities-daily').value) || 0;

            const transportTotal = transportDaily * tripDays;
            const foodTotal = foodDaily * 2 * tripDays; // 2 persons
            const activitiesTotal = activitiesDaily * tripDays;

            document.getElementById('budget-transport').textContent = '‚Ç¨' + transportTotal.toFixed(0);
            document.getElementById('budget-food').textContent = '‚Ç¨' + foodTotal.toFixed(0);
            document.getElementById('budget-activities').textContent = '‚Ç¨' + activitiesTotal.toFixed(0);

            // Calculate total
            const grandTotal = flightsTotal + hotelsTotal + transportTotal + foodTotal + activitiesTotal;
            document.getElementById('budget-total').textContent = '‚Ç¨' + grandTotal.toFixed(0);
            document.getElementById('budget-per-person').textContent = '‚Ç¨' + (grandTotal / 2).toFixed(0);
        }

        // Category Functions
        function addCategory() {
            const nameInput = document.getElementById('new-category-name');
            const categoryName = nameInput.value.trim();
            
            if (!categoryName) {
                alert('Bitte einen Namen f√ºr die Kategorie eingeben!');
                return;
            }

            categoryCounter++;
            const categoryId = 'category-' + categoryCounter;
            categories[categoryId] = { name: categoryName, items: [] };

            const container = document.getElementById('categories-container');
            const categoryFolder = document.createElement('div');
            categoryFolder.className = 'category-folder';
            categoryFolder.id = categoryId;
            
            categoryFolder.innerHTML = `
                <div class="category-header" onclick="toggleCategory('${categoryCounter}')">
                    <span class="category-icon">üìÅ</span>
                    <span class="category-name">${categoryName}</span>
                    <span class="category-toggle">‚ñº</span>
                </div>
                <div class="category-content" id="content-${categoryCounter}">
                    <div id="items-${categoryCounter}"></div>
                    <div class="category-actions">
                        <button class="add-item-btn" onclick="addActivityToCategory('${categoryCounter}')">+ Aktivit√§t/Restaurant hinzuf√ºgen</button>
                        <button class="delete-category-btn" onclick="deleteCategory('${categoryCounter}')">üóëÔ∏è Kategorie l√∂schen</button>
                    </div>
                </div>
            `;
            
            container.appendChild(categoryFolder);
            nameInput.value = '';
        }

        function toggleCategory(id) {
            const content = document.getElementById('content-' + id);
            const folder = document.getElementById('category-' + id);
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                folder.classList.remove('collapsed');
            } else {
                content.style.display = 'none';
                folder.classList.add('collapsed');
            }
        }

        function addActivityToCategory(categoryId) {
            activityCounter++;
            const activityId = 'activity-' + activityCounter;
            const container = document.getElementById('items-' + categoryId);
            
            const activityItem = document.createElement('div');
            activityItem.className = 'activity-item';
            activityItem.id = activityId;
            
            activityItem.innerHTML = `
                <div class="activity-header">
                    <input type="text" id="activity-name-${activityCounter}" placeholder="Name (z.B. Locavore Restaurant, Tirta Empul Tempel)" style="flex: 1; font-size: 1.1em; font-weight: bold; border: 2px solid #ddd; padding: 8px; border-radius: 8px;">
                    <div>
                        <input type="number" id="activity-price-${activityCounter}" placeholder="0" style="width: 80px; text-align: center; padding: 8px; border: 2px solid #ddd; border-radius: 8px;" onchange="updateActivityPrice(${activityCounter})">
                        <span style="margin-left: 5px;">‚Ç¨</span>
                    </div>
                </div>
                <div class="activity-details">
                    <div>
                        <label><strong>üîó Link:</strong></label>
                        <input type="url" id="activity-link-${activityCounter}" placeholder="Link (Booking, Google Maps, Instagram, etc.)" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 8px;">
                    </div>
                    <div>
                        <label><strong>üìù Notizen:</strong></label>
                        <textarea id="activity-notes-${activityCounter}" placeholder="√ñffnungszeiten, Reservierung n√∂tig, Besonderheiten..." style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; min-height: 60px;"></textarea>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="link-button" onclick="openActivityLink(${activityCounter})" id="activity-link-btn-${activityCounter}" style="display: none;">üîó Link √∂ffnen</button>
                        <button class="delete-btn" onclick="deleteActivity('${activityId}')">üóëÔ∏è L√∂schen</button>
                    </div>
                </div>
            `;
            
            container.appendChild(activityItem);

            // Show link button when link is entered
            document.getElementById('activity-link-' + activityCounter).addEventListener('input', function() {
                const btn = document.getElementById('activity-link-btn-' + activityCounter);
                if (this.value) {
                    btn.style.display = 'inline-block';
                } else {
                    btn.style.display = 'none';
                }
            });
        }

        function updateActivityPrice(id) {
            const price = parseFloat(document.getElementById('activity-price-' + id).value) || 0;
            // Could update budget here if needed
        }

        function openActivityLink(id) {
            const link = document.getElementById('activity-link-' + id).value;
            if (link) {
                window.open(link, '_blank');
            }
        }

        function deleteActivity(activityId) {
            const item = document.getElementById(activityId);
            if (item && confirm('Aktivit√§t wirklich l√∂schen?')) {
                item.remove();
            }
        }

        function deleteCategory(categoryId) {
            const folder = document.getElementById('category-' + categoryId);
            if (folder && confirm('Kategorie mit allen Eintr√§gen l√∂schen?')) {
                folder.remove();
                delete categories['category-' + categoryId];
            }
        }

        // Initialize
        updateBudget();
        loadFromStorage(); // Load saved data on startup

        // Auto-save function that runs automatically
        function autoSave() {
            try {
                const planData = collectAllData();
                localStorage.setItem('indonesienPlan', JSON.stringify(planData));
                
                // Show brief confirmation
                const statusDiv = document.getElementById('save-status');
                if (statusDiv) {
                    statusDiv.style.display = 'block';
                    setTimeout(() => {
                        statusDiv.style.display = 'none';
                    }, 1500);
                }
            } catch (error) {
                console.log('Auto-save error:', error);
            }
        }

        // Collect all data from form
        function collectAllData() {
            const planData = {
                version: '1.0',
                savedDate: new Date().toISOString(),
                flights: {
                    outbound: {
                        link: document.getElementById('outbound-link')?.value || '',
                        airline: document.getElementById('outbound-airline')?.value || '',
                        price: document.getElementById('outbound-price')?.value || ''
                    },
                    return: {
                        link: document.getElementById('return-link')?.value || '',
                        airline: document.getElementById('return-airline')?.value || '',
                        price: document.getElementById('return-price')?.value || ''
                    }
                },
                hotels: {},
                budget: {
                    transportDaily: document.getElementById('transport-daily')?.value || '50',
                    foodDaily: document.getElementById('food-daily')?.value || '40',
                    activitiesDaily: document.getElementById('activities-daily')?.value || '50'
                }
            };

            // Collect route hotels
            routeStops.forEach(stop => {
                if (stop.isHotel) {
                    const hotel = {
                        name: document.getElementById(stop.id + '-hotel-name')?.value || '',
                        link: document.getElementById(stop.id + '-hotel-link')?.value || '',
                        price: document.getElementById(stop.id + '-price')?.value || '',
                        notes: document.getElementById(stop.id + '-notes')?.value || ''
                    };
                    if (stop.hasIslandChoice) {
                        hotel.island = document.getElementById(stop.id + '-island')?.value || '';
                    }
                    planData.hotels[stop.id] = hotel;
                }
            });

            return planData;
        }

        // Load data from localStorage
        function loadFromStorage() {
            try {
                const saved = localStorage.getItem('indonesienPlan');
                if (!saved) return;

                const planData = JSON.parse(saved);
                
                // Restore flights
                if (planData.flights) {
                    if (planData.flights.outbound) {
                        setValueSafe('outbound-link', planData.flights.outbound.link);
                        setValueSafe('outbound-airline', planData.flights.outbound.airline);
                        setValueSafe('outbound-price', planData.flights.outbound.price);
                    }
                    if (planData.flights.return) {
                        setValueSafe('return-link', planData.flights.return.link);
                        setValueSafe('return-airline', planData.flights.return.airline);
                        setValueSafe('return-price', planData.flights.return.price);
                    }
                }

                // Restore hotels
                if (planData.hotels) {
                    Object.keys(planData.hotels).forEach(hotelId => {
                        const hotel = planData.hotels[hotelId];
                        setValueSafe(hotelId + '-hotel-name', hotel.name);
                        setValueSafe(hotelId + '-hotel-link', hotel.link);
                        setValueSafe(hotelId + '-price', hotel.price);
                        setValueSafe(hotelId + '-notes', hotel.notes);
                        if (hotel.island) {
                            setValueSafe(hotelId + '-island', hotel.island);
                        }
                    });
                }

                // Restore budget
                if (planData.budget) {
                    setValueSafe('transport-daily', planData.budget.transportDaily);
                    setValueSafe('food-daily', planData.budget.foodDaily);
                    setValueSafe('activities-daily', planData.budget.activitiesDaily);
                }

                updateBudget();
            } catch (error) {
                console.log('Load from storage failed:', error);
            }
        }

        // Helper function to safely set values
        function setValueSafe(id, value) {
            const element = document.getElementById(id);
            if (element && value) {
                element.value = value;
            }
        }

        // Auto-save every 10 seconds
        setInterval(function() {
            autoSave();
        }, 10000); // Every 10 seconds
    </script>
</body>
</html>