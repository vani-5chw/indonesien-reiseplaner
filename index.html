<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>üå¥ Indonesien Reiseplaner</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            overflow-x: hidden;
            max-width: 100vw;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            padding: 8px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        /* Header */
        .header {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .header h1 {
            font-size: clamp(1.3rem, 4vw, 2rem);
            color: #1a202c;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: clamp(0.85rem, 2.5vw, 1rem);
            color: #64748b;
            margin-bottom: 15px;
        }

        .share-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 10px;
            font-size: clamp(0.9rem, 2.5vw, 1.05rem);
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            max-width: 300px;
            box-shadow: 0 4px 12px rgba(16,185,129,0.3);
        }

        .info-text {
            margin-top: 12px;
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            color: #666;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 1000px) {
            .main-grid {
                grid-template-columns: 2fr 1fr;
            }
        }

        /* Card */
        .card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .card-title {
            font-size: clamp(1.1rem, 3vw, 1.3rem);
            color: #1a202c;
            margin-bottom: 15px;
            font-weight: 600;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 20px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding-bottom: 2px;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 10px 16px;
            background: #f8f9fa;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            white-space: nowrap;
            color: #64748b;
            font-weight: 500;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .tab.active {
            background: #3b82f6;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Forms */
        input, select, textarea {
            width: 100%;
            padding: 11px;
            border: 1.5px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            margin-top: 6px;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }

        textarea {
            min-height: 70px;
            resize: vertical;
        }

        label {
            display: block;
            font-weight: 600;
            font-size: clamp(0.85rem, 2vw, 0.95rem);
            color: #475569;
            margin-top: 12px;
        }

        button:not(.tab) {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 11px 18px;
            border-radius: 8px;
            font-size: clamp(0.85rem, 2vw, 0.95rem);
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        /* Alert */
        .alert {
            padding: 12px;
            background: #e0f2fe;
            border-left: 3px solid #0284c7;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: clamp(0.85rem, 2vw, 0.9rem);
        }

        /* Route Item */
        .route-item {
            background: #f8fafc;
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 12px;
            border-left: 3px solid #3b82f6;
        }

        .route-day {
            background: #3b82f6;
            color: white;
            padding: 5px 10px;
            border-radius: 12px;
            display: inline-block;
            font-size: clamp(0.75rem, 2vw, 0.85rem);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .route-title {
            font-size: clamp(0.95rem, 2.5vw, 1.1rem);
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 10px;
        }

        /* Grid 2 columns */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        @media (min-width: 500px) {
            .grid-2 {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Budget Overview */
        .budget-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
        }

        .budget-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: clamp(0.85rem, 2.5vw, 0.95rem);
        }

        .budget-total {
            text-align: center;
            padding: 18px;
            background: rgba(255,255,255,0.15);
            border-radius: 10px;
            margin-top: 15px;
        }

        .budget-total-amount {
            font-size: clamp(1.6rem, 5vw, 2rem);
            font-weight: bold;
            margin: 8px 0;
        }

        .budget-per-person {
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            opacity: 0.9;
        }

        /* Day Budget Card */
        .day-card {
            background: #f8fafc;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 3px solid #3b82f6;
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .day-badge {
            background: #3b82f6;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: clamp(0.75rem, 2vw, 0.85rem);
            font-weight: 600;
        }

        .day-info {
            font-size: clamp(0.85rem, 2vw, 0.95rem);
            font-weight: 600;
            color: #1a202c;
        }

        .day-total {
            text-align: right;
            margin-top: 10px;
            padding: 8px;
            background: white;
            border-radius: 6px;
            font-weight: 600;
            color: #1a202c;
            font-size: clamp(0.85rem, 2vw, 0.95rem);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 24px;
            max-width: 500px;
            width: 100%;
        }

        .modal-title {
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            color: #10b981;
            margin-bottom: 12px;
            text-align: center;
        }

        .share-link {
            background: #f5f5f5;
            padding: 12px;
            border-radius: 8px;
            word-break: break-all;
            margin: 15px 0;
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            border: 2px dashed #10b981;
            max-height: 150px;
            overflow-y: auto;
        }

        .modal-btn {
            margin-top: 8px;
        }

        .close-modal-btn {
            background: #e5e7eb;
            color: #374151;
        }

        /* Mobile specific */
        @media (max-width: 600px) {
            body {
                padding: 4px;
            }

            .header {
                padding: 16px 12px;
            }

            .card {
                padding: 12px;
            }

            input, select, textarea {
                padding: 10px;
            }

            .route-item, .day-card {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üå¥ Indonesien Reiseplaner</h1>
            <p class="subtitle">20. August - 4. September 2026 ‚Ä¢ 16 Tage ‚Ä¢ 2 Personen</p>
            <button class="share-btn" onclick="shareData()">üì§ Teilen & Link erstellen</button>
            <p class="info-text">üí° Klick auf "Teilen" um einen Link zu erstellen!<br>Den Link kannst du per WhatsApp verschicken! üéâ</p>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Left Column -->
            <div>
                <div class="card">
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('overview')">üìä √úbersicht</button>
                        <button class="tab" onclick="switchTab('flights')">‚úàÔ∏è Fl√ºge</button>
                        <button class="tab" onclick="switchTab('route')">üó∫Ô∏è Route</button>
                        <button class="tab" onclick="switchTab('daily-budget')">üí∞ Budget</button>
                    </div>

                    <!-- Overview Tab -->
                    <div id="overview" class="tab-content active">
                        <h2 class="card-title">üìä Reise√ºbersicht</h2>
                        <div class="alert">
                            <strong>‚è∞ Wichtig!</strong> Flug Salzburg ‚Üí Bali am 20. Aug<br>
                            R√ºckflug Jakarta ‚Üí Salzburg am 4. Sep
                        </div>
                        <div class="route-item">
                            <div class="route-day">‚ú® Highlights</div>
                            <div class="route-title">15 N√§chte ‚Ä¢ 8 Stops</div>
                            <p style="font-size: 0.9em; color: #64748b;">Bali ‚Üí Java ‚Üí Jakarta</p>
                        </div>
                    </div>

                    <!-- Flights Tab -->
                    <div id="flights" class="tab-content">
                        <h2 class="card-title">‚úàÔ∏è Fl√ºge</h2>
                        
                        <div class="route-item">
                            <div class="route-day">Hinflug ‚Ä¢ 20. Aug</div>
                            <div class="route-title">SZG ‚Üí DPS</div>
                            <label>üîó Buchungslink:</label>
                            <input type="url" id="flight-out-link" placeholder="CheckFelix Link...">
                            <div class="grid-2">
                                <div>
                                    <label>Airline:</label>
                                    <input type="text" id="flight-out-airline" placeholder="z.B. Emirates">
                                </div>
                                <div>
                                    <label>üí∞ Preis/Person (‚Ç¨):</label>
                                    <input type="number" id="flight-out-price" value="0" onchange="updateBudget()">
                                </div>
                            </div>
                        </div>

                        <div class="route-item">
                            <div class="route-day">R√ºckflug ‚Ä¢ 4. Sep</div>
                            <div class="route-title">JKT ‚Üí SZG</div>
                            <label>üîó Buchungslink:</label>
                            <input type="url" id="flight-return-link" placeholder="CheckFelix Link...">
                            <div class="grid-2">
                                <div>
                                    <label>Airline:</label>
                                    <input type="text" id="flight-return-airline" placeholder="z.B. Emirates">
                                </div>
                                <div>
                                    <label>üí∞ Preis/Person (‚Ç¨):</label>
                                    <input type="number" id="flight-return-price" value="0" onchange="updateBudget()">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Route Tab -->
                    <div id="route" class="tab-content">
                        <h2 class="card-title">üó∫Ô∏è Route & Hotels</h2>
                        <div class="alert">üå∫ Plane hier deine Hotels f√ºr jeden Stop!</div>
                        <div id="route-hotels"></div>
                    </div>

                    <!-- Daily Budget Tab -->
                    <div id="daily-budget" class="tab-content">
                        <h2 class="card-title">üí∞ Tagesbudget</h2>
                        <div class="alert">üí° Plane f√ºr jeden Tag separat!</div>
                        <div id="daily-budget-container"></div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Budget -->
            <div>
                <div class="card budget-card">
                    <h2 style="margin-bottom: 15px; font-size: clamp(1.2rem, 4vw, 1.5rem);">üí∞ Budget</h2>
                    <p style="font-size: clamp(0.85rem, 2vw, 0.9rem); margin-bottom: 15px; opacity: 0.9;">f√ºr 2 Personen</p>

                    <div class="budget-item">
                        <span>‚úàÔ∏è Fl√ºge</span>
                        <span id="budget-flights">‚Ç¨0</span>
                    </div>
                    <div class="budget-item">
                        <span>üè® Hotels</span>
                        <span id="budget-hotels">‚Ç¨0</span>
                    </div>
                    <div class="budget-item">
                        <span>üõÇ Visum</span>
                        <span id="budget-visa">‚Ç¨0</span>
                    </div>
                    <div class="budget-item">
                        <span>üöó Transport</span>
                        <span id="budget-transport">‚Ç¨0</span>
                    </div>
                    <div class="budget-item">
                        <span>üçΩÔ∏è Essen</span>
                        <span id="budget-food">‚Ç¨0</span>
                    </div>
                    <div class="budget-item">
                        <span>üéØ Aktivit√§ten</span>
                        <span id="budget-activities">‚Ç¨0</span>
                    </div>

                    <div class="budget-total">
                        <div style="font-size: 0.8em; opacity: 0.8;">GESAMT</div>
                        <div class="budget-total-amount" id="budget-total">‚Ç¨0</div>
                        <div class="budget-per-person">Pro Person: <span id="budget-per-person">‚Ç¨0</span></div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.08); border-radius: 10px;">
                        <h3 style="margin-bottom: 12px; font-size: clamp(0.95rem, 2.5vw, 1.05rem);">üõÇ Visum</h3>
                        <label style="color: white; font-size: clamp(0.85rem, 2vw, 0.9rem);">Kosten/Person (‚Ç¨):</label>
                        <input type="number" id="visa-cost" value="0" onchange="updateBudget()" style="background: white; color: #333; margin-top: 8px;">
                        <p style="font-size: clamp(0.75rem, 2vw, 0.85rem); opacity: 0.8; margin-top: 8px;">üí° Visa on Arrival: ca. 35‚Ç¨</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">üéâ Link erstellt!</div>
            <p style="text-align: center; color: #666; margin-bottom: 10px; font-size: clamp(0.85rem, 2vw, 0.95rem);">
                Kopiere und verschicke diesen Link!
            </p>
            <div class="share-link" id="shareLink"></div>
            <button class="modal-btn" onclick="copyLink()">üìã Link kopieren</button>
            <button class="modal-btn close-modal-btn" onclick="closeModal()">Schlie√üen</button>
        </div>
    </div>

    <script>
        // Route configuration
        const routeStops = [
            { id: 'ubud', name: 'Ubud', nights: 4 },
            { id: 'sidemen', name: 'Sidemen', nights: 2 },
            { id: 'amed', name: 'Amed', nights: 1 },
            { id: 'gili', name: 'Gili Air/Meno', nights: 2 },
            { id: 'ijen', name: 'Java Ijen', nights: 2 },
            { id: 'bromo', name: 'Bromo', nights: 1 },
            { id: 'yogya', name: 'Yogyakarta', nights: 2 },
            { id: 'jakarta', name: 'Jakarta', nights: 1 }
        ];

        // Days configuration
        const days = [
            { day: 1, date: '20. Aug', location: 'Anreise/Ubud' },
            { day: 2, date: '21. Aug', location: 'Ubud' },
            { day: 3, date: '22. Aug', location: 'Ubud' },
            { day: 4, date: '23. Aug', location: 'Ubud' },
            { day: 5, date: '24. Aug', location: 'Sidemen' },
            { day: 6, date: '25. Aug', location: 'Sidemen' },
            { day: 7, date: '26. Aug', location: 'Amed' },
            { day: 8, date: '27. Aug', location: 'Gili' },
            { day: 9, date: '28. Aug', location: 'Gili' },
            { day: 10, date: '29. Aug', location: 'Java Ijen' },
            { day: 11, date: '30. Aug', location: 'Java Ijen' },
            { day: 12, date: '31. Aug', location: 'Bromo' },
            { day: 13, date: '1. Sep', location: 'Yogyakarta' },
            { day: 14, date: '2. Sep', location: 'Yogyakarta' },
            { day: 15, date: '3. Sep', location: 'Jakarta' },
            { day: 16, date: '4. Sep', location: 'R√ºckflug' }
        ];

        // Generate Route Hotels
        function generateRouteHotels() {
            const container = document.getElementById('route-hotels');
            container.innerHTML = '';
            
            routeStops.forEach(stop => {
                const item = document.createElement('div');
                item.className = 'route-item';
                item.innerHTML = `
                    <div class="route-day">${stop.nights} Nacht${stop.nights > 1 ? 'e' : ''}</div>
                    <div class="route-title">${stop.name}</div>
                    <label>üè® Hotel-Name:</label>
                    <input type="text" id="${stop.id}-name" placeholder="Hotel-Name">
                    <label>üîó Booking-Link:</label>
                    <input type="url" id="${stop.id}-link" placeholder="Booking.com Link">
                    <div class="grid-2">
                        <div>
                            <label>üí∞ Preis/Nacht (‚Ç¨):</label>
                            <input type="number" id="${stop.id}-price" value="0" onchange="updateHotelTotal('${stop.id}', ${stop.nights})">
                        </div>
                        <div>
                            <label>Gesamt:</label>
                            <input type="text" id="${stop.id}-total" readonly style="background: #f0f0f0; font-weight: 600;" value="‚Ç¨0">
                        </div>
                    </div>
                    <label>üìù Notizen:</label>
                    <textarea id="${stop.id}-notes" placeholder="Notizen..."></textarea>
                `;
                container.appendChild(item);
            });
        }

        // Generate Daily Budget
        function generateDailyBudget() {
            const container = document.getElementById('daily-budget-container');
            container.innerHTML = '';
            
            days.forEach(day => {
                const card = document.createElement('div');
                card.className = 'day-card';
                card.innerHTML = `
                    <div class="day-header">
                        <div>
                            <div class="day-badge">Tag ${day.day}</div>
                            <div class="day-info" style="margin-top: 4px;">${day.date} ‚Ä¢ ${day.location}</div>
                        </div>
                    </div>
                    <div class="grid-2" style="grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
                        <div>
                            <label style="font-size: 0.8em;">üöó Transport</label>
                            <input type="number" id="day${day.day}-transport" value="0" onchange="updateBudget()" style="padding: 8px;">
                        </div>
                        <div>
                            <label style="font-size: 0.8em;">üçΩÔ∏è Essen</label>
                            <input type="number" id="day${day.day}-food" value="0" onchange="updateBudget()" style="padding: 8px;">
                        </div>
                        <div>
                            <label style="font-size: 0.8em;">üéØ Aktivit√§t</label>
                            <input type="number" id="day${day.day}-activities" value="0" onchange="updateBudget()" style="padding: 8px;">
                        </div>
                    </div>
                    <div class="day-total">
                        Tagesgesamt: <span id="day${day.day}-total">‚Ç¨0</span>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Update hotel total
        function updateHotelTotal(stopId, nights) {
            const price = parseFloat(document.getElementById(`${stopId}-price`)?.value) || 0;
            const total = price * nights;
            document.getElementById(`${stopId}-total`).value = `‚Ç¨${total}`;
            updateBudget();
        }

        // Update budget
        function updateBudget() {
            // Flights
            const flightOut = parseFloat(document.getElementById('flight-out-price')?.value) || 0;
            const flightReturn = parseFloat(document.getElementById('flight-return-price')?.value) || 0;
            const flightsTotal = (flightOut + flightReturn) * 2;
            document.getElementById('budget-flights').textContent = `‚Ç¨${flightsTotal}`;

            // Hotels
            let hotelsTotal = 0;
            routeStops.forEach(stop => {
                const price = parseFloat(document.getElementById(`${stop.id}-price`)?.value) || 0;
                hotelsTotal += price * stop.nights;
            });
            document.getElementById('budget-hotels').textContent = `‚Ç¨${hotelsTotal}`;

            // Visa
            const visaCost = parseFloat(document.getElementById('visa-cost')?.value) || 0;
            const visaTotal = visaCost * 2;
            document.getElementById('budget-visa').textContent = `‚Ç¨${visaTotal}`;

            // Daily expenses
            let transportTotal = 0, foodTotal = 0, activitiesTotal = 0;
            days.forEach(day => {
                const transport = parseFloat(document.getElementById(`day${day.day}-transport`)?.value) || 0;
                const food = parseFloat(document.getElementById(`day${day.day}-food`)?.value) || 0;
                const activities = parseFloat(document.getElementById(`day${day.day}-activities`)?.value) || 0;
                
                transportTotal += transport;
                foodTotal += food;
                activitiesTotal += activities;

                const dayTotal = transport + food + activities;
                document.getElementById(`day${day.day}-total`).textContent = `‚Ç¨${dayTotal}`;
            });

            document.getElementById('budget-transport').textContent = `‚Ç¨${transportTotal}`;
            document.getElementById('budget-food').textContent = `‚Ç¨${foodTotal}`;
            document.getElementById('budget-activities').textContent = `‚Ç¨${activitiesTotal}`;

            // Grand total
            const grandTotal = flightsTotal + hotelsTotal + visaTotal + transportTotal + foodTotal + activitiesTotal;
            document.getElementById('budget-total').textContent = `‚Ç¨${grandTotal}`;
            document.getElementById('budget-per-person').textContent = `‚Ç¨${Math.round(grandTotal / 2)}`;
        }

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Collect all data
        function collectAllData() {
            const data = {
                flights: {
                    out: {
                        link: document.getElementById('flight-out-link')?.value || '',
                        airline: document.getElementById('flight-out-airline')?.value || '',
                        price: document.getElementById('flight-out-price')?.value || '0'
                    },
                    return: {
                        link: document.getElementById('flight-return-link')?.value || '',
                        airline: document.getElementById('flight-return-airline')?.value || '',
                        price: document.getElementById('flight-return-price')?.value || '0'
                    }
                },
                hotels: {},
                visa: document.getElementById('visa-cost')?.value || '0',
                dailyBudget: {}
            };

            routeStops.forEach(stop => {
                data.hotels[stop.id] = {
                    name: document.getElementById(`${stop.id}-name`)?.value || '',
                    link: document.getElementById(`${stop.id}-link`)?.value || '',
                    price: document.getElementById(`${stop.id}-price`)?.value || '0',
                    notes: document.getElementById(`${stop.id}-notes`)?.value || ''
                };
            });

            days.forEach(day => {
                data.dailyBudget[`day${day.day}`] = {
                    transport: document.getElementById(`day${day.day}-transport`)?.value || '0',
                    food: document.getElementById(`day${day.day}-food`)?.value || '0',
                    activities: document.getElementById(`day${day.day}-activities`)?.value || '0'
                };
            });

            return data;
        }

        // Share data
        function shareData() {
            const data = collectAllData();
            const compressed = btoa(encodeURIComponent(JSON.stringify(data)));
            const url = window.location.href.split('?')[0] + '?data=' + compressed;
            
            document.getElementById('shareLink').textContent = url;
            document.getElementById('shareModal').classList.add('show');
        }

        // Copy link
        function copyLink() {
            const link = document.getElementById('shareLink').textContent;
            navigator.clipboard.writeText(link).then(() => {
                alert('‚úÖ Link kopiert! Jetzt per WhatsApp verschicken!');
            }).catch(() => {
                const textarea = document.createElement('textarea');
                textarea.value = link;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('‚úÖ Link kopiert!');
            });
        }

        // Close modal
        function closeModal() {
            document.getElementById('shareModal').classList.remove('show');
        }

        // Load data from URL
        function loadDataFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const dataParam = urlParams.get('data');
            
            if (dataParam) {
                try {
                    const data = JSON.parse(decodeURIComponent(atob(dataParam)));
                    
                    // Load flights
                    if (data.flights) {
                        document.getElementById('flight-out-link').value = data.flights.out.link || '';
                        document.getElementById('flight-out-airline').value = data.flights.out.airline || '';
                        document.getElementById('flight-out-price').value = data.flights.out.price || '0';
                        document.getElementById('flight-return-link').value = data.flights.return.link || '';
                        document.getElementById('flight-return-airline').value = data.flights.return.airline || '';
                        document.getElementById('flight-return-price').value = data.flights.return.price || '0';
                    }

                    // Load hotels
                    if (data.hotels) {
                        Object.keys(data.hotels).forEach(hotelId => {
                            const hotel = data.hotels[hotelId];
                            document.getElementById(`${hotelId}-name`).value = hotel.name || '';
                            document.getElementById(`${hotelId}-link`).value = hotel.link || '';
                            document.getElementById(`${hotelId}-price`).value = hotel.price || '0';
                            document.getElementById(`${hotelId}-notes`).value = hotel.notes || '';
                            
                            const stop = routeStops.find(s => s.id === hotelId);
                            if (stop) updateHotelTotal(hotelId, stop.nights);
                        });
                    }

                    // Load visa
                    if (data.visa) {
                        document.getElementById('visa-cost').value = data.visa;
                    }

                    // Load daily budget
                    if (data.dailyBudget) {
                        Object.keys(data.dailyBudget).forEach(dayId => {
                            const dayData = data.dailyBudget[dayId];
                            document.getElementById(`${dayId}-transport`).value = dayData.transport || '0';
                            document.getElementById(`${dayId}-food`).value = dayData.food || '0';
                            document.getElementById(`${dayId}-activities`).value = dayData.activities || '0';
                        });
                    }

                    updateBudget();
                    alert('‚úÖ Daten erfolgreich geladen!');
                } catch (e) {
                    console.error('Error loading data:', e);
                }
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            generateRouteHotels();
            generateDailyBudget();
            loadDataFromURL();
            updateBudget();
        });
    </script>
</body>
</html>
